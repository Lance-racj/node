function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var t=e(require("emittery")),n=e(require("resize-observer-polyfill")),i=e(require("randomcolor"));function r(e,t,n){if(void 0===n&&(n=1),n<=0)return[e];var i=Array(Math.ceil((t-e)/n)).fill(e).map(function(e,t){return e+t*n});return i[i.length-1]!==t&&i.push(t),i}function o(e,t,n){return Math.abs(t-e)<Math.abs(n-e)?t:n}exports.createScroom=function(e){var i=e.target,d=e.offset,s=void 0===d?.5:d,c=e.threshold,l=void 0===c?4:c,a=e.direction,p=void 0===a?"vertical":a,h=new t,u=g(),f=new n(v);function g(){var e,t;if("vertical"===p)e=-s*window.innerHeight+"px 0px "+((s-1)*window.innerHeight+i.clientHeight)+"px 0px",t=l/i.clientHeight;else{var n=-s*window.innerWidth;e="0px "+((s-1)*window.innerWidth+i.clientWidth)+"px 0px "+n+"px",t=l/i.clientWidth}var d=!1,c=-1,a=!0;return setTimeout(function(){a=!1}),new IntersectionObserver(function(e){var t=e[0],n=t.boundingClientRect,r=t.intersectionRect,l=t.isIntersecting,u=!1,f=0;"vertical"===p?(u=n.top<r.top&&l,f=1-r.height/n.height):"horizontal"===p&&(u=n.left<r.left&&l,f=1-r.width/n.width);var g=!d&&u,v=d&&!u;d=u;var x=function(e){c!==e&&h.emit("progress",{target:i,progress:e}),c=e};g&&(h.emit("enter",{target:i}),a||x(o(f,0,1))),u&&c!==f&&x(f),v&&(h.emit("leave",{target:i}),x(o(f,0,1))),h.emit("debug",{target:i,progress:f,offset:s,intersection:t,direction:p,action:g?"enter":v?"leave":u?"progress":null})},{rootMargin:e,threshold:r(0,1,t)})}function v(){u.disconnect(),(u=g()).observe(i)}return window.addEventListener("resize",v),f.observe(i),{target:i,observer:u,destroy:function(){u.disconnect(),f.disconnect(),h.clearListeners(),window.removeEventListener("resize",v)},on:h.on.bind(h),once:h.once.bind(h),off:h.off.bind(h)}},exports.debug=function(e,t){var n=i({luminosity:"dark",format:"rgbArray"}),r="rgb("+n[0]+","+n[1]+","+n[2]+")",o="rgba("+n[0]+","+n[1]+","+n[2]+",0.1)",d=document.createElement("div"),s=document.createElement("div");function c(e){var n=e.offset,i=e.action,o=e.progress,c=e.intersection,l="enter"===i||"progress"===i?"block":"none";d.style.cssText="\n      position: fixed;\n      z-index: 99999;\n      pointer-events: none;\n      display: "+l+";\n      "+("vertical"===e.direction?"\n              left: 0;\n              width: 100%;\n              bottom: "+100*(1-n)+"%;\n              color: "+r+";\n              border-bottom: 1px dashed "+r+";\n              padding: 5px 20px;\n            ":"\n              top: 0;\n              height: 100%;\n              right: "+100*(1-n)+"%;\n              color: "+r+";\n              border-right: 1px dashed "+r+";\n              padding: 20px 5px;\n            ")+"\n    ",s.style.display=l;var a=c.boundingClientRect;s.style.top=a.top+"px",s.style.left=a.left+"px",s.style.width=a.width+"px",s.style.height=a.height+"px",l&&(d.innerText=(t?"["+t+"]":"")+"  "+(100*o).toFixed(3)+"%")}function l(){var t=e.target.getBoundingClientRect();s.style.top=t.top+"px",s.style.left=t.left+"px",s.style.width=t.width+"px",s.style.height=t.height+"px"}return s.style.cssText="\n      position: fixed;\n      z-index: 100000;\n      background: "+o+";\n      outline: 1px solid "+r+";\n      pointer-events: none;\n    ",document.body.appendChild(d),document.body.appendChild(s),e.on("debug",c),window.addEventListener("resize",l,!1),window.addEventListener("scroll",l,!1),l(),{destroy:function(){e.off("debug",c),window.removeEventListener("resize",l,!1),window.removeEventListener("scroll",l,!1),d.remove(),s.remove()}}};
//# sourceMappingURL=scroom.js.map
