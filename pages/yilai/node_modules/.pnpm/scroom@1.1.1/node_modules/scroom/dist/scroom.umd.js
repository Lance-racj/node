!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("emittery"),require("resize-observer-polyfill"),require("randomcolor")):"function"==typeof define&&define.amd?define(["exports","emittery","resize-observer-polyfill","randomcolor"],t):t((e=e||self).Scroom={},e.emittery,e.resizeObserverPolyfill,e.randomcolor)}(this,function(e,t,n,i){function r(e,t,n){if(void 0===n&&(n=1),n<=0)return[e];var i=Array(Math.ceil((t-e)/n)).fill(e).map(function(e,t){return e+t*n});return i[i.length-1]!==t&&i.push(t),i}function o(e,t,n){return Math.abs(t-e)<Math.abs(n-e)?t:n}t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i,e.createScroom=function(e){var i=e.target,d=e.offset,s=void 0===d?.5:d,l=e.threshold,c=void 0===l?4:l,a=e.direction,p=void 0===a?"vertical":a,f=new t,u=v(),h=new n(g);function v(){var e,t;if("vertical"===p)e=-s*window.innerHeight+"px 0px "+((s-1)*window.innerHeight+i.clientHeight)+"px 0px",t=c/i.clientHeight;else{var n=-s*window.innerWidth;e="0px "+((s-1)*window.innerWidth+i.clientWidth)+"px 0px "+n+"px",t=c/i.clientWidth}var d=!1,l=-1,a=!0;return setTimeout(function(){a=!1}),new IntersectionObserver(function(e){var t=e[0],n=t.boundingClientRect,r=t.intersectionRect,c=t.isIntersecting,u=!1,h=0;"vertical"===p?(u=n.top<r.top&&c,h=1-r.height/n.height):"horizontal"===p&&(u=n.left<r.left&&c,h=1-r.width/n.width);var v=!d&&u,g=d&&!u;d=u;var y=function(e){l!==e&&f.emit("progress",{target:i,progress:e}),l=e};v&&(f.emit("enter",{target:i}),a||y(o(h,0,1))),u&&l!==h&&y(h),g&&(f.emit("leave",{target:i}),y(o(h,0,1))),f.emit("debug",{target:i,progress:h,offset:s,intersection:t,direction:p,action:v?"enter":g?"leave":u?"progress":null})},{rootMargin:e,threshold:r(0,1,t)})}function g(){u.disconnect(),(u=v()).observe(i)}return window.addEventListener("resize",g),h.observe(i),{target:i,observer:u,destroy:function(){u.disconnect(),h.disconnect(),f.clearListeners(),window.removeEventListener("resize",g)},on:f.on.bind(f),once:f.once.bind(f),off:f.off.bind(f)}},e.debug=function(e,t){var n=i({luminosity:"dark",format:"rgbArray"}),r="rgb("+n[0]+","+n[1]+","+n[2]+")",o="rgba("+n[0]+","+n[1]+","+n[2]+",0.1)",d=document.createElement("div"),s=document.createElement("div");function l(e){var n=e.offset,i=e.action,o=e.progress,l=e.intersection,c="enter"===i||"progress"===i?"block":"none";d.style.cssText="\n      position: fixed;\n      z-index: 99999;\n      pointer-events: none;\n      display: "+c+";\n      "+("vertical"===e.direction?"\n              left: 0;\n              width: 100%;\n              bottom: "+100*(1-n)+"%;\n              color: "+r+";\n              border-bottom: 1px dashed "+r+";\n              padding: 5px 20px;\n            ":"\n              top: 0;\n              height: 100%;\n              right: "+100*(1-n)+"%;\n              color: "+r+";\n              border-right: 1px dashed "+r+";\n              padding: 20px 5px;\n            ")+"\n    ",s.style.display=c;var a=l.boundingClientRect;s.style.top=a.top+"px",s.style.left=a.left+"px",s.style.width=a.width+"px",s.style.height=a.height+"px",c&&(d.innerText=(t?"["+t+"]":"")+"  "+(100*o).toFixed(3)+"%")}function c(){var t=e.target.getBoundingClientRect();s.style.top=t.top+"px",s.style.left=t.left+"px",s.style.width=t.width+"px",s.style.height=t.height+"px"}return s.style.cssText="\n      position: fixed;\n      z-index: 100000;\n      background: "+o+";\n      outline: 1px solid "+r+";\n      pointer-events: none;\n    ",document.body.appendChild(d),document.body.appendChild(s),e.on("debug",l),window.addEventListener("resize",c,!1),window.addEventListener("scroll",c,!1),c(),{destroy:function(){e.off("debug",l),window.removeEventListener("resize",c,!1),window.removeEventListener("scroll",c,!1),d.remove(),s.remove()}}}});
//# sourceMappingURL=scroom.umd.js.map
